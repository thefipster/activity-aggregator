@page "/batch"
@using System.Text.Json


<MudTabs @ref="@_tabs" Elevation="0" Centered="true" Color="Color.Primary" ApplyEffectsToContainer="true"
         PanelClass="pa-6">

    @if (_batches != null)
    {
        @foreach (var batch in _batches)
        {
            <MudTabPanel Text="@(batch.Kind == DataKind.Day ? "Day" : batch.Timestamp.ToString("HH:mm:ss"))">
                <MudContainer Class="ma-5 pa-5 ml-12 mt-20 d-flex flex-column gap-5" Fixed="true">
                    <MudCard>
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
                                    <MudText Typo="Typo.h4">Batch
                                        <smaller>@($"{batch.Timestamp:dd.MM.yyyy HH:mm:ss}")</smaller>
                                    </MudText>
                                    <MudIconButton Color="Color.Primary" OnClick="@OnBackClicked"
                                                   Icon="@Icons.Material.Outlined.ArrowBack">
                                    </MudIconButton>
                                </MudStack>
                            </CardHeaderContent>
                        </MudCardHeader>
                        <MudProgressLinear></MudProgressLinear>
                        <MudCardContent>
                            <pre>
                                @(JsonSerializer.Serialize(batch, new JsonSerializerOptions() { WriteIndented = true }))
                            </pre>
                        </MudCardContent>
                    </MudCard>
                </MudContainer>
            </MudTabPanel>
        }
    }
</MudTabs>