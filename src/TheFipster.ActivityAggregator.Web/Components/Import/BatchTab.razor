<MudContainer Class="ma-5 pa-5 d-flex flex-column gap-5" Fixed="true">
    <MudCard>
        <MudCardHeader>
            <CardHeaderContent>
                <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
                    <MudText Typo="Typo.h4">Batch assimilations</MudText>
                    @if (_isMergeActive)
                    {
                        <MudText>@_progressMessage</MudText>
                        <MudProgressCircular Color="Color.Primary" Size="Size.Small" Indeterminate="@_isMergeActive"/>
                    }
                    else
                    {
                        <MudIconButton Color="Color.Primary" OnClick="@OnMergeClicked" Disabled="@_isMergeActive"
                                       Icon="@Icons.Material.Outlined.Merge" />
                    }
                </MudStack>
            </CardHeaderContent>
        </MudCardHeader>
        <MudProgressLinear Color="Color.Primary" Value="@_progress"/>
        <MudCardContent Class="d-flex justify-center align-center">
            <MudToggleGroup T="int" Value="@_selectedYear" ValueChanged="@OnYearChange" Outlined="true"
                            Delimiters="true">
                @if (_index.Any())
                {
                    @foreach (var item in _index)
                    {
                        <MudToggleItem Value="@item.Key" Style="width: 75px;">@item.Key</MudToggleItem>
                    }
                }
            </MudToggleGroup>
        </MudCardContent>
    </MudCard>

    <MudCard>
        <MudCardContent Class="d-flex align-center">
            @if (_isRendered)
            {
                <YearCalendar Year="@_selectedYear" Inventory="@_inventory" Batches="@_batchDates"></YearCalendar>
            }
        </MudCardContent>
    </MudCard>
</MudContainer>